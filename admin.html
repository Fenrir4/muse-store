<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Fenrir Admin | –î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .admin-container { max-width: 800px; margin: 120px auto; padding: 20px; background: #f9f9f9; border-radius: 10px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; }
        input, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        .result-area { background: #222; color: #0f0; padding: 15px; margin-top: 20px; border-radius: 5px; display: none; }
        .copy-btn { background: #b8860b; color: #fff; border: none; padding: 10px 20px; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="admin-container">
        <h1>–ê–¥–º—ñ–Ω–∫–∞ Fenrir Dev üê∫</h1>
        <p>–ó–∞–ø–æ–≤–Ω—ñ—Ç—å —Ñ–æ—Ä–º—É, —â–æ–± –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∫–æ–¥ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä—É.</p>
        
        <form id="product-form">
            <div class="form-group">
                <label>ID —Ç–æ–≤–∞—Ä—É (–Ω–∞—Å—Ç—É–ø–Ω–∏–π –ø–æ –ø–æ—Ä—è–¥–∫—É)</label>
                <input type="number" id="p-id" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: 5" required>
            </div>
            <div class="form-group">
                <label>–ë—Ä–µ–Ω–¥</label>
                <input type="text" id="p-brand" placeholder="Tom Ford" required>
            </div>
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞ –∞—Ä–æ–º–∞—Ç—É</label>
                <input type="text" id="p-title" placeholder="Tobacco Vanille" required>
            </div>
            <div class="form-group">
                <label>–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ñ–æ—Ç–æ</label>
                <input type="text" id="p-img" placeholder="img/parfum/tf.jpg" required>
            </div>
            <div class="form-group">
                <label>–û–ø–∏—Å</label>
                <textarea id="p-desc" rows="4"></textarea>
            </div>
            <div class="form-group">
                <label>–í–µ—Ä—Ö–Ω—ñ –Ω–æ—Ç–∏</label>
                <input type="text" id="p-top">
            </div>
            <div class="form-group">
                <label>–¶—ñ–Ω–∞ –∑–∞ –ø–æ–≤–Ω–∏–π —Ñ–ª–∞–∫–æ–Ω</label>
                <input type="number" id="p-price-full" required>
            </div>
            
            <button type="button" class="add-to-cart-big" onclick="saveProduct()">–ó–ë–ï–†–ï–ì–¢–ò –í –ë–ê–ó–£</button>
        </form>

        <div id="result-block" class="result-area">
            <h4>–°–∫–æ–ø—ñ—é–π—Ç–µ —Ü–µ–π –∫–æ–¥ —ñ –≤—Å—Ç–∞–≤—Ç–µ –π–æ–≥–æ –≤ –∫—ñ–Ω–µ—Ü—å –º–∞—Å–∏–≤—É —É —Ñ–∞–π–ª—ñ <code>js/products.js</code>:</h4>
            <pre id="code-output"></pre>
            <button class="copy-btn" onclick="copyCode()">–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∫–æ–¥</button>
        </div>
    </div>


    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<script>
    // 1. –ü–ï–†–ï–í–Ü–†, –©–û –¢–£–¢ –¢–í–û–Ø –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø (–∑ –º–∏–Ω—É–ª–æ–≥–æ –∫—Ä–æ–∫—É)
    const firebaseConfig = {
        apiKey: "AIzaSyCn8FeDaouYV-tXRn9RNG2os-2A89OXscY",
        authDomain: "milliliter-shop.firebaseapp.com",
        databaseURL: "https://milliliter-shop-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "milliliter-shop",
        storageBucket: "milliliter-shop.firebasestorage.app",
        messagingSenderId: "799244023149",
        appId: "1:799244023149:web:cfbafca4f1c2c028205664"
    };

    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // 2. –¶–Ø –§–£–ù–ö–¶–Ü–Ø –¢–ï–ü–ï–† –í–Ü–î–ü–†–ê–í–õ–Ø–Ñ –î–ê–ù–Ü –í –•–ú–ê–†–£
    function saveProduct() {
        // –ó–±–∏—Ä–∞—î–º–æ –¥–∞–Ω—ñ –∑ –ø–æ–ª—ñ–≤ —Ñ–æ—Ä–º–∏
        const id = document.getElementById('p-id').value;
        const brand = document.getElementById('p-brand').value;
        const title = document.getElementById('p-title').value;
        const img = document.getElementById('p-img').value;
        const desc = document.getElementById('p-desc').value;
        const top = document.getElementById('p-top').value;
        const price = parseInt(document.getElementById('p-price-full').value);

        if (!id || !brand || !title) {
            alert("–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –æ—Å–Ω–æ–≤–Ω—ñ –ø–æ–ª—è (ID, –ë—Ä–µ–Ω–¥, –ù–∞–∑–≤–∞)!");
            return;
        }

        // –§–æ—Ä–º—É—î–º–æ –æ–±'—î–∫—Ç —Ç–æ–≤–∞—Ä—É
        const productData = {
            id: parseInt(id),
            brand: brand,
            title: title,
            price: price,
            image: img,
            description: desc,
            notes: {
                top: top,
                heart: "–î–æ–¥–∞–π—Ç–µ –Ω–æ—Ç–∏ —Å–µ—Ä—Ü—è",
                base: "–î–æ–¥–∞–π—Ç–µ –±–∞–∑–æ–≤—ñ –Ω–æ—Ç–∏"
            },
            options: [
                { volume: "2 –º–ª", price: Math.round(price * 0.05) }, // –ü—Ä–∏–±–ª–∏–∑–Ω–∞ —Ü—ñ–Ω–∞ –∑–∞ —Ä–æ–∑–ø–∏–≤
                { volume: "5 –º–ª", price: Math.round(price * 0.12) },
                { volume: "10 –º–ª", price: Math.round(price * 0.22) },
                { volume: "–§–ª–∞–∫–æ–Ω", price: price, active: true }
            ]
        };

        // –í–Ü–î–ü–†–ê–í–ö–ê –í FIREBASE
        // db.ref('products/' + id) ‚Äî —Ü–µ —à–ª—è—Ö —É –±–∞–∑—ñ, –∫—É–¥–∏ –º–∏ –∫–ª–∞–¥–µ–º–æ —Ç–æ–≤–∞—Ä
        db.ref('products/' + id).set(productData)
            .then(() => {
                alert("–£—Å–ø—ñ—Ö! –¢–æ–≤–∞—Ä ‚Ññ" + id + " —Ç–µ–ø–µ—Ä —É —Ö–º–∞—Ä—ñ. –ü–µ—Ä–µ–≤—ñ—Ä —Å–∞–π—Ç! üöÄ");
                document.getElementById('product-form').reset(); // –û—á–∏—â–∞—î–º–æ —Ñ–æ—Ä–º—É
            })
            .catch((error) => {
                alert("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ: " + error.message);
            });
    }
</script>

    <script src="js/main.js"></script>

    <script>
        function generateCode() {
            const id = document.getElementById('p-id').value;
            const brand = document.getElementById('p-brand').value;
            const title = document.getElementById('p-title').value;
            const img = document.getElementById('p-img').value;
            const desc = document.getElementById('p-desc').value;
            const top = document.getElementById('p-top').value;
            const price = document.getElementById('p-price-full').value;

            const productCode = `
    {
        id: ${id},
        brand: "${brand}",
        title: "${title}",
        price: ${price},
        image: "${img}",
        description: "${desc}",
        notes: {
            top: "${top}",
            heart: "–î–æ–¥–∞–π—Ç–µ –Ω–æ—Ç–∏",
            base: "–î–æ–¥–∞–π—Ç–µ –Ω–æ—Ç–∏"
        },
        options: [
            { volume: "2 –º–ª", price: 200 },
            { volume: "5 –º–ª", price: 500 },
            { volume: "10 –º–ª", price: 950 },
            { volume: "–§–ª–∞–∫–æ–Ω", price: ${price}, active: true }
        ]
    },`;

            document.getElementById('code-output').textContent = productCode;
            document.getElementById('result-block').style.display = 'block';
        }

        function copyCode() {
            const code = document.getElementById('code-output').textContent;
            navigator.clipboard.writeText(code);
            alert('–ö–æ–¥ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ! –¢–µ–ø–µ—Ä –≤—Å—Ç–∞–≤ –π–æ–≥–æ –≤ js/products.js');
        }
    </script>
</body>
</html>